<!doctype html>
<html lang="ja">
  <head>
    <meta charset="utf-8" />
    <title>ç”Ÿè–¬ 3DGS çµ±åˆãƒ“ãƒ¥ãƒ¼ã‚¢</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />


    <style>
      * {
        box-sizing: border-box;
      }
      body {
        margin: 0;
        font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI",
          sans-serif;
        background: #05070a;
        color: #f5f5f5;
      }

      /* å…¨ä½“ãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆ */
      #layout {
        display: flex;
        height: 100vh;
        overflow: hidden;
      }

      /* å·¦ï¼šã‚µã‚¤ãƒ‰ãƒãƒ¼ï¼ˆã‚¿ã‚¤ãƒˆãƒ«ï¼‹æ¤œç´¢ï¼‹ä¸€è¦§ï¼‰ */
      #sidebar {
        display: flex;
        flex-direction: column;
        gap: 6px;
      }

      .sidebar-title {
        font-size: 20px;
        font-weight: 600;
        margin: 0;
      }

      .sidebar-help {
        font-size: 12px;
        color: #9ca3af;
        margin: 0 0 4px;
      }

      #searchInput,
      #tagFilter {
        width: 100%;
        box-sizing: border-box;
      }


      /* ğŸ” æ¤œç´¢ï¼†ã‚¿ã‚°ãƒ•ã‚£ãƒ«ã‚¿ï¼ˆä¸Šéƒ¨ã ã‘ï¼‰ */
      #searchBox {
        flex: 0 0 auto;
        display: flex;
        flex-direction: column;
        gap: 6px;
        margin-top: 4px;
        margin-bottom: 4px;
      }
      #searchInput {
        width: 100%;
        padding: 4px 8px;
        border-radius: 6px;
        border: 1px solid #1f2937;
        background: #020617;
        color: #e5e7eb;
        font-size: 12px;
      }
      #searchInput::placeholder {
        color: #6b7280;
      }
      #tagFilter {
        width: 100%;
        padding: 4px 8px;
        border-radius: 6px;
        border: 1px solid #1f2937;
        background: #020617;
        color: #e5e7eb;
        font-size: 12px;
      }

      /* ğŸ§¾ ãƒ¢ãƒ‡ãƒ«ä¸€è¦§ï¼šæ®‹ã‚Šã®é«˜ã•ã‚’å…¨éƒ¨ä½¿ã£ã¦ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ« */
      #modelList {
        flex: 1 1 auto;
        overflow-y: auto;
      }

      .model-card {
        border-radius: 8px;
        padding: 8px 10px;
        background: #181b24;
        cursor: pointer;
        transition: background 0.15s, transform 0.1s, box-shadow 0.1s;
        border: 1px solid transparent;
        margin-bottom: 6px;
      }
      .model-card:hover {
        background: #202432;
        transform: translateY(-1px);
        box-shadow: 0 2px 6px rgba(0, 0, 0, 0.35);
      }
      .model-card.active {
        border-color: #3b82f6;
        background: #1c2333;
      }
      .model-title {
        font-size: 13px;
        font-weight: 600;
      }
      .model-sub {
        font-size: 11px;
        color: #9ba3b4;
        margin-top: 2px;
      }
      .model-tags {
        margin-top: 4px;
        display: flex;
        flex-wrap: wrap;
        gap: 4px;
      }
      .tag {
        font-size: 10px;
        padding: 2px 6px;
        border-radius: 999px;
        background: #242a3a;
        color: #c8d0ff;
      }

      /* ä¸­å¤®ï¼‹å³ã‚’ã¾ã¨ã‚ã‚‹ãƒ©ãƒƒãƒ‘ */
      #viewerInfoWrapper {
        display: flex;
        min-width: 0;
        height: 100vh;
        flex: 1 1 auto;
        background: #0f172a;
      }

      /* ä¸­å¤®ï¼š3Dãƒ“ãƒ¥ãƒ¼ã‚¨ãƒªã‚¢ï¼ˆå¹…å¯å¤‰ï¼‰ */
      #viewer {
        flex: 1 1 auto;
        min-width: 320px;
        position: relative;
        background: #05070a;
      }
      #viewer canvas {
        display: block;
      }
      #viewer-overlay {
        position: absolute;
        top: 10px;
        left: 10px;
        padding: 6px 10px;
        background: rgba(0, 0, 0, 0.55);
        border-radius: 8px;
        font-size: 11px;
        color: #e5e7eb;
        z-index: 5;
        pointer-events: none;
      }
      #viewer-overlay strong {
        font-weight: 600;
      }

      /* ä»•åˆ‡ã‚Šãƒãƒ¼ï¼ˆãƒ‰ãƒ©ãƒƒã‚°å¯¾è±¡ï¼‰ */
      #splitter {
        width: 6px;
        cursor: col-resize;
        background: #111827;
      }

      /* å³ï¼šæƒ…å ±ãƒ‘ãƒãƒ«ï¼ˆåˆæœŸã¯320pxï¼‰ */
      #infoPanel {
        flex: 0 0 320px;
        max-width: 520px;
        min-width: 260px;
        background: #0f172a;
        border-left: 1px solid #1e293b;
        padding: 12px 14px;
        display: flex;
        flex-direction: column;
        gap: 12px;
        overflow-y: auto;
      }
      #infoPanel h2 {
        margin: 0;
        font-size: 16px;
      }
      .latin {
        font-style: normal;
        font-size: 13px;
        color: #94a3b8;
      }
      .latin-binomial {
        font-style: italic;
      }
      .info-row {
        font-size: 13px;
        margin-top: 4px;
      }
      .info-label {
        color: #64748b;
      }
      .info-body {
        color: #e5e7eb;
      }
      #description {
        font-size: 13px;
        line-height: 1.5;
        margin-top: 6px;
      }
      hr {
        border: none;
        border-top: 1px solid #1f2933;
        margin: 8px 0;
      }

      #mediaGallery {
        margin-top: 8px;
        display: flex;
        flex-direction: column;
        gap: 8px;
      }

      .media-item {
        background: #020617;
        border-radius: 8px;
        padding: 6px;
        border: 1px solid #1f2937;
      }

      .media-item img {
        max-width: 100%;
        display: block;
        border-radius: 6px;
      }

      .media-caption {
        margin-top: 4px;
        font-size: 11px;
        color: #9ca3af;
      }



      /* ã‚¯ã‚¤ã‚ºéƒ¨åˆ† */
      #quiz {
        margin-top: 6px;
        font-size: 13px;
      }
      #quiz h3 {
        margin: 0 0 4px;
        font-size: 14px;
      }
      .quiz-question {
        margin-bottom: 6px;
      }
      .quiz-options {
        display: flex;
        flex-direction: column;
        gap: 4px;
      }
      .quiz-option-btn {
        text-align: left;
        padding: 6px 8px;
        border-radius: 6px;
        border: 1px solid #334155;
        background: #020617;
        color: #e5e7eb;
        cursor: pointer;
        font-size: 13px;
        transition: background 0.1s, border-color 0.1s, transform 0.05s;
      }
      .quiz-option-btn:hover {
        background: #111827;
        transform: translateY(-0.5px);
      }
      .quiz-option-btn.correct {
        border-color: #22c55e;
        background: #022c22;
      }
      .quiz-option-btn.incorrect {
        border-color: #ef4444;
        background: #2f1317;
      }
      #quiz-feedback {
        margin-top: 4px;
        font-size: 12px;
      }

      #footerNote {
        margin-top: 4px;
        font-size: 11px;
        color: #64748b;
      }

      /* ãƒ‰ãƒ©ãƒƒã‚°ä¸­ã¯ã‚«ãƒ¼ã‚½ãƒ«å›ºå®šï¼†ãƒ†ã‚­ã‚¹ãƒˆé¸æŠç¦æ­¢ */
      body.resizing * {
        cursor: col-resize !important;
        user-select: none;
      }


      /* ===========================
         ã‚¹ãƒãƒ›ç”¨ãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆèª¿æ•´
         =========================== */
      @media (max-width: 900px) {
        html,
        body {
          height: auto;
        }

      /* å…¨ä½“ã¯ç¸¦ã«ç©ã‚“ã§ã€ãƒšãƒ¼ã‚¸å…¨ä½“ã§ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ« */
      #layout {
        flex-direction: column;
        height: auto;
       }

      /* ä¸Šï¼šã‚µã‚¤ãƒ‰ãƒãƒ¼ï¼ˆã‚¿ã‚¤ãƒˆãƒ«ï¼‹èª¬æ˜ï¼‹æ¤œç´¢ï¼‹ã‚¿ã‚°ï¼‹ãƒªã‚¹ãƒˆï¼‰ */
      #sidebar {
        flex: 0 0 auto;
        width: 100%;
        max-width: none;
        border-right: none;
        border-bottom: 1px solid #111827;

        padding: 8px 10px;
        display: flex;
        flex-direction: column;  /* â˜… ç¸¦ä¸€åˆ—ã«å›ºå®š */
        gap: 6px;

      /* ã‚µã‚¤ãƒ‰ãƒãƒ¼è‡ªä½“ã¯é«˜ã•åˆ¶é™ã›ãšã€ãƒšãƒ¼ã‚¸å…¨ä½“ã§ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ« */
        max-height: none;
        overflow: visible;
      }

      /* ãƒ¢ãƒ‡ãƒ«ä¸€è¦§ã ã‘ã€ã¡ã‚‡ã£ã¨é«˜ã•ã‚’æ±ºã‚ã¦å†…å´ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«ã«ã™ã‚‹ãªã‚‰ï¼ˆå¥½ã¿ï¼‰ */
      #modelList {
        max-height: 30vh;       /* â˜… ã“ã“ã‚’å‰Šã‚Œã°ãƒªã‚¹ãƒˆã‚‚ãƒšãƒ¼ã‚¸ã¨ä¸€ç·’ã«ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ« */
        overflow-y: auto;
      }

      /* æ¤œç´¢ãƒœãƒƒã‚¯ã‚¹ã¨ã‚¿ã‚°é¸æŠã‚’å°‘ã—ã‚³ãƒ³ãƒ‘ã‚¯ãƒˆã« */
      #searchInput,
      #tagFilter {
        font-size: 13px;
        padding: 4px 8px;
        height: 32px;
      }

      /* ä¸­å¤®ï¼‹å³ã‚’ç¸¦ä¸¦ã³ã«ã—ã¦é«˜ã•æ‹˜æŸã‚’å¤–ã™ */
      #viewerInfoWrapper {
        flex-direction: column;
        height: auto;
      }

      /* 3Dãƒ“ãƒ¥ãƒ¼ã¯ç”»é¢ã® 35ã€œ40% ãã‚‰ã„ */
      #viewer {
        flex: 0 0 auto;
        width: 100%;
        min-width: auto;
        height: 38vh;
      }

      /* ä»•åˆ‡ã‚Šãƒãƒ¼ã¯ã‚¹ãƒãƒ›ã§ã¯ä¸è¦ */
      #splitter {
        display: none;
      }

      /* æƒ…å ±ãƒ‘ãƒãƒ«ã¯é«˜ã•å›ºå®šã‚’ã‚„ã‚ã¦ã€å…¨ä½“ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«ã«ä»»ã›ã‚‹ */
      #infoPanel {
        flex: 0 0 auto;
        width: 100%;
        max-width: 100%;
        max-height: none;
        height: auto;
        overflow: visible;
        border-left: none;
        border-top: 1px solid #111827;
        padding: 8px 12px 24px;
      }
    }

  </style>

    <!-- three.js / Spark ã‚’ãƒ©ã‚ºãƒ‘ã‚¤ä¸Šã®ãƒ•ã‚¡ã‚¤ãƒ«ã‹ã‚‰èª­ã¿è¾¼ã‚€ -->
    <script type="importmap">
      {
        "imports": {
          "three": "/js/three.module.js",
          "three/addons/": "/js/addons/",
          "@sparkjsdev/spark": "https://sparkjs.dev/releases/spark/0.1.10/spark.module.js"
        }
      }
    </script>
  </head>
  <body>
    <div id="layout">
      <!-- å·¦ï¼šãƒ¢ãƒ‡ãƒ«ä¸€è¦§ -->
      <aside id="sidebar">
          <h1 id="sidebar-title">ç”Ÿè–¬ 3D æ¨™æœ¬</h1>

        <p id="sidebar-desc">
          ãƒ¢ãƒ‡ãƒ«ã‚’é¸æŠã™ã‚‹ã¨å³å´ã«æƒ…å ±ãŒè¡¨ç¤ºã•ã‚Œã¾ã™ã€‚
        </p>

      <!-- æ¤œç´¢ãƒœãƒƒã‚¯ã‚¹ -->
        <input
          id="searchInput"
          type="text"
          placeholder="åå‰ãƒ»å­¦åã§æ¤œç´¢..."
          autocomplete="off"
        />

      <!-- ã‚¿ã‚°ãƒ•ã‚£ãƒ«ã‚¿ -->
        <select id="tagFilter">
          <option value="">ã™ã¹ã¦ã®ã‚¿ã‚°</option>
      <!-- JS ã® initTagFilter ãŒä¸Šæ›¸ãã—ã¾ã™ -->
        </select>

      <!-- ãƒ¢ãƒ‡ãƒ«ä¸€è¦§ -->
        <div id="modelList"></div>
      </aside>



      <!-- ä¸­å¤®ã€œå³ï¼š3Dãƒ“ãƒ¥ãƒ¼ + ä»•åˆ‡ã‚Š + æƒ…å ±ãƒ‘ãƒãƒ« -->
      <div id="viewerInfoWrapper">
        <!-- ä¸­å¤®ï¼š3D ãƒ“ãƒ¥ãƒ¼ã‚¨ãƒªã‚¢ -->
        <main id="viewer">
          <div id="viewer-overlay">
            <div>
              <strong>æ“ä½œ:</strong>
              ãƒ‰ãƒ©ãƒƒã‚°: å›è»¢ / ãƒ›ã‚¤ãƒ¼ãƒ«: ã‚ºãƒ¼ãƒ  / å³ãƒ‰ãƒ©ãƒƒã‚°: å¹³è¡Œç§»å‹•
            </div>
          </div>
        </main>

        <!-- ã“ã“ãŒãƒ‰ãƒ©ãƒƒã‚°ç”¨ã®ä»•åˆ‡ã‚Šãƒãƒ¼ -->
        <div id="splitter"></div>

        <!-- å³ï¼šæƒ…å ±ãƒ‘ãƒãƒ« -->
        <aside id="infoPanel">
          <div>
            <h2 id="info-title">ãƒ¢ãƒ‡ãƒ«ã‚’é¸æŠã—ã¦ãã ã•ã„</h2>
            <div id="info-latin" class="latin"></div>
            <div class="info-row">
              <span class="info-label">åŸºåŸæ¤ç‰©ï¼š</span>
              <span id="info-source" class="info-body">-</span>
            </div>
            <div class="info-row">
              <span class="info-label">è–¬ç”¨éƒ¨ä½ï¼š</span>
              <span id="info-part" class="info-body">-</span>
            </div>
            <div class="info-row">
              <span class="info-label">è£œè¶³ï¼š</span>
              <span id="info-extra" class="info-body">-</span>
            </div>
              <!-- â˜… ã“ã“ã‹ã‚‰ã€Œç”Ÿè–¬ã®æ€§çŠ¶ã€ãƒ©ãƒ™ãƒ«ï¼‹æœ¬æ–‡ -->
            <div class="info-row">
            <span class="info-label">ç”Ÿè–¬ã®æ€§çŠ¶ï¼š</span>
            </div>
            <div id="description" class="info-body"></div>
              <!-- â˜… ã“ã“ã¾ã§ãŒ viewer.js ã® model.description ãŒå…¥ã‚‹å ´æ‰€ -->
            <div id="mediaGallery"></div>
            <div id="descriptionhelp">
              ç”Ÿè–¬ã‚’å·¦ã®ä¸€è¦§ã‹ã‚‰é¸ã¶ã¨ã€ã“ã“ã«æ¦‚è¦ã¨ã‚¯ã‚¤ã‚ºãŒè¡¨ç¤ºã•ã‚Œã¾ã™ã€‚
            </div>
          </div>

          <hr />

          <section id="quiz">
            <h3>ã‚¯ã‚¤ã‚º</h3>
            <div id="quiz-content">
              <div class="quiz-question">
                ãƒ¢ãƒ‡ãƒ«ã‚’é¸æŠã™ã‚‹ã¨ã‚¯ã‚¤ã‚ºãŒæœ‰åŠ¹ã«ãªã‚Šã¾ã™ã€‚
              </div>
            </div>
            <div id="quiz-feedback"></div>
          </section>

          <div id="footerNote">
            â€»å†…å®¹ã¯ãƒ‡ãƒ¢ç”¨ã§ã™ã€‚å®Ÿéš›ã®æˆæ¥­ã§ã¯ã€ã“ã“ã«æˆåˆ†ãƒ»è–¬ç†ãƒ»æ³¨æ„ç‚¹ãªã©ã‚‚è¼‰ã›ã‚‰ã‚Œã¾ã™ã€‚
          </div>
        </aside>
      </div>
    </div>

    <!-- ãƒ­ã‚¸ãƒƒã‚¯ã¯ã™ã¹ã¦ viewer.js ã«åˆ‡ã‚Šå‡ºã— -->
    <script type="module" src="/js/viewer.js"></script>
  </body>
</html>
